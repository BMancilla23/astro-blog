---
/**
 * Importamos la configuraciÃ³n general del sitio
 * el layour principal y el componente PostCard
 * */

import { siteConfig } from "@/config/site-config";
import MainLayout from "../layouts/MainLayout.astro";
import PostCard from "@/components/PostCard.astro";
import { getCollection } from "astro:content";
import TypedPostCard from "@/components/TypedPostCard.astro";
import { Icon } from "astro-icon/components";

const posts = await getCollection(
  "blog",
  ({ data }) => !data.isDraft && !!data.date,
);
// console.log("blogPosts:", blogPosts);
---

<MainLayout title="Bryan's Blog">
  <!-- <div class="bg-gray-900 py-24 sm:py-32"> -->
  <div class="mx-auto max-w-7xl px-6 lg:px-8">
    <!-- Header del blog -->
    <div class="mx-auto max-w-2xl lg:mx-0">
      <h2
        class="text-4xl font-semibold tracking-tight text-pretty text-white sm:text-5xl"
      >
        {siteConfig.title}
      </h2>
      <p class="mt-2 text-lg/8 text-gray-300">
        {siteConfig.description}
      </p>

      <!-- Enlace a blog paginado -->
      <div class="mt-6">
        <a
          href="/blog"
          class="text-base font-semibold leading-7 text-indigo-400 hover:text-indigo-300"
        >
          Leer todos los posts
          <Icon name="lucide:arrow-right" class="ml-1 inline h-5 w-5" />
        </a>

        <!-- Enlace a lista de autores -->
        <a
          href="/authors"
          class="ml-6 text-base font-semibold leading-7 text-indigo-400 hover:text-indigo-300"
        >
          Ver autores
          <Icon name="lucide:arrow-right" class="ml-1 inline h-5 w-5" />
        </a>
      </div>

      <!-- Grid de posts -->
      <div
        class="mx-auto mt-10 grid max-w-2xl grid-cols-1 gap-x-8 gap-y-16 border-t border-gray-700 pt-10 sm:mt-16 sm:pt-16 lg:mx-0 lg:max-w-none lg:grid-cols-3"
      >
        {posts.map((post) => <TypedPostCard post={post} />)}
      </div>
    </div>
    <!-- </div> -->
  </div>
</MainLayout>
